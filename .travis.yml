language: python

python:
- 3.6

install:
- pip install pytest==3.9.1

script: pytest

jobs:
  include:
  - python: 3.7
    dist: xenial
    sudo: true

  - python: 3.5

  - python: 3.4

  - python: 3.3

  - python: 3.2

  - python: 2.7

  - python: 2.6

  - stage: &stage_deploy_name upload new version of python package to PYPI (only for tagged commits)
    if: tag IS present
    python: 3.6
    install: skip
    script: skip
    deploy:
      provider: pypi
      on:
        all_branches: true
        tags: true
      user: bosswissam
      password:
        secure: 
      distributions: clean --all sdist bdist_wheel
      skip_cleanup: true
      skip_upload_docs: true

cache:
  pip: true
